# =============================================================================
# AgentFlow Configuration
# Copy to .env and fill in values: cp .env.example .env
# =============================================================================

# -- Application --------------------------------------------------------------
ENVIRONMENT=development          # development | staging | production
DEBUG=true                       # Enable debug mode (docs UI, verbose logs)
LOG_LEVEL=INFO                   # DEBUG | INFO | WARNING | ERROR | CRITICAL
SECRET_KEY=change-me-in-production

# -- Server -------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000

# -- Database -----------------------------------------------------------------
DATABASE_URL=postgresql+asyncpg://agentflow:agentflow@localhost:5432/agentflow
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# Postgres container settings (used by docker-compose)
POSTGRES_USER=agentflow
POSTGRES_PASSWORD=agentflow
POSTGRES_DB=agentflow
POSTGRES_PORT=5432

# -- Redis --------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
REDIS_PORT=6379

# -- Celery -------------------------------------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_DEFAULT_QUEUE=default
CELERY_TASK_DEFAULT_RETRY_DELAY=60   # seconds before first retry
CELERY_TASK_MAX_RETRIES=3
CELERY_TASK_SOFT_TIME_LIMIT=300      # seconds — raises SoftTimeLimitExceeded
CELERY_TASK_TIME_LIMIT=600           # seconds — hard kill
CELERY_RESULT_EXPIRES=86400          # 24 hours
CELERY_WORKER_PREFETCH_MULTIPLIER=1  # fetch one task at a time (fair scheduling)

# -- LLM Providers -----------------------------------------------------------
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
DEFAULT_MODEL=gpt-4o

# -- Observability ------------------------------------------------------------
OTEL_SERVICE_NAME=agentflow
OTEL_EXPORTER_ENDPOINT=http://localhost:4317

# -- Security -----------------------------------------------------------------
API_KEY_HEADER=X-API-Key
